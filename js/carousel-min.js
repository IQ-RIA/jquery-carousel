CJ={version:"3.1.0",apply:function(a,b,c){c&&CJ.apply(a,c);if(a&&b&&"object"==typeof b)for(var d in b)a[d]=b[d];return a}};
CJ.apply(CJ,{extend:function(){var a=function(a){for(var b in a)this[b]=a[b]},b=Object.prototype.constructor;return function(c,d,f){CJ.isObject(d)&&(f=d,d=c,c=f.constructor!=b?f.constructor:function(){d.apply(this,arguments)});var e=function(){},g=d.prototype;e.prototype=g;e=c.prototype=new e;e.constructor=c;c.superclass=g;g.constructor==b&&(g.constructor=d);c.override=function(a){CJ.override(c,a)};e.superclass=e.supr=function(){return g};e.override=a;CJ.override(c,f);c.extend=function(a){return CJ.extend(c,
a)};return c}}(),override:function(a,b){if(b){var c=a.prototype;CJ.apply(c,b);CJ.isIE&&b.hasOwnProperty("toString")&&(c.toString=b.toString)}},isObject:function(a){return!!a&&"[object Object]"===Object.prototype.toString.call(a)},ns:function(a){var b=window;a=a.split(".");for(var c=0;c<a.length;c++){var d=a[c];"undefined"==typeof b[d]&&(b[d]={});b=b[d]}}});$.fn.reverse=[].reverse;CJ.ns("CJ");CJ.Component=function(a){"undefined"==typeof a&&(a={});this.children=[];this.renderOrder="c2p";this.xtype=a.xtype||"component";this.initComponent(a)};
CJ.Component.prototype={initComponent:function(){},attachJS:function(){},createMarkup:function(){},beforeRender:function(){return!0},render:function(a){if(!this.beforeRender())return!1;this.parentEl=$(a||"body");this.ct=this.createMarkup();"c2p"==this.renderOrder?(this.renderChildren(),this.attachJS()):(this.attachJS(),this.renderChildren());this.rendered=!0;return this.afterRender()},afterRender:function(){},renderChildren:function(a){"undefined"!=typeof a&&(this.ct=a);if("undefined"!=typeof this.children)for(a=
0;a<this.children.length;a++)this.children[a].render(this.ct)},addChild:function(a){this.children.push(a)},getOwnerCmp:function(a){for(var b=this.parent;b;){if(b instanceof a)return b;b=b.parent}return!1}};CJ.ns("CJ");CJ.Carousel={Navigation:{},Animation:{},Renderer:{}};
CJ.Carousel.Carousel=CJ.extend(CJ.Component,{constructor:function(a){a=a||{};this.currentPageNum=a.currentPageNum||0;CJ.apply(this,a);this.init()},init:function(a){this.renderers=this.renderers||{};this.pageSize=this.settings.defaultPageSize||30;this.animator=this.animator||CJ.Carousel.Animation.SlideAnimator;this.navigator=this.navigator||CJ.Carousel.Navigation.ButtonNavigator;this.store=this.createStore();this.pageRenderer=this.createPageRenderer();this.animator=this.createAnimator();this.navigator=
this.createNavigator();this.store.setPageLoadCallback({success:{fn:this.onPageLoaded,scope:this},failure:{fn:function(){},scope:this}});this.isPageSizeChanged=!0},createStore:function(){var a={pageSize:this.pageSize,carousel:this};return this.store instanceof CJ.Carousel.Store?CJ.apply(this.store,a):new CJ.Carousel.Store(CJ.apply(a,this.store))},createAnimator:function(){return new this.animator({carousel:this,settings:this.settings,afterAnimate:{fn:this.onAfterAnimate,scope:this},beforeAnimate:{fn:this.onBeforeAnimate,
scope:this}})},createPageRenderer:function(){return this.pageRender||new CJ.Carousel.Renderer.PageRenderer({carousel:this,renderers:this.renderers,settings:this.settings})},createNavigator:function(){return new this.navigator({carousel:this,settings:this.settings})},onPageLoaded:function(a){this.rendered||this.render();this.pageRenderer.reConfigure({pageData:a,cols:this.settings.cols});this.pageRenderer.render(this.el);this.navigator&&this.navigator.setValidCls&&this.navigator.setValidCls()},onAfterAnimate:function(){},
onPageLoadError:function(a){"undefined"!=typeof console&&console.log(a)},createMarkup:function(){this.el=$('<div class="cj-carousel-root-'+this.settings.cols+'-colsthis.settings.theme"><div class="cj-carousel-root-wrapper '+this.settings.theme+'"><ul class="cj-carousel-root '+this.settings.theme+'"></ul></div></div>');this.el.appendTo(this.parentEl);return this.el},attachJS:function(){this.attachNavigation()},setCarouselWidth:function(){parseInt(this.pageRenderer.el.css("width"));var a=this.pageRenderer.el.height();
$(".cj-carousel-root-wrapper",this.parentEl).css({height:a})},attachNavigation:function(){this.navigator&&this.navigator.render()},getCurrentPageNum:function(){return this.currentPageNum},movePage:function(a){this.setPage(a);this.parent&&this.parent.pagination?this.parent.pagination.setPage(this.getCurrentPageNum()):this.getStore().getPage(this.getCurrentPageNum())},setPage:function(a){!(0>a)&&!(a>=this.store.getTotalSize())&&(this.oldCurrentPageNum=this.currentPageNum,this.currentPageNum=a)},getPlaceHolder:function(){return this.el},
changePageNum:function(a){this.setPage(a-1);this.store.getPage(this.getCurrentPageNum())},getPageSize:function(){return this.parent&&this.parent.pageSizeChanger&&this.parent.pageSizeChanger.getCurrentPageSize?this.parent.pageSizeChanger.getCurrentPageSize():this.store.pageSize},setLastPage:function(a){this.lastPageEl=a},getLastPage:function(){return this.lastPageEl},resetCarousel:function(){this.store.clear();$(".cj-carousel-root",this.parentEl).css({left:0})},getList:function(){return $(".cj-carousel-root",
this.el)},onBeforeAnimate:function(){this.isPageSizeChanged&&(this.isPageSizeChanged=!1,this.setCarouselWidth())},getStore:function(){return this.store},getPage:function(a){var b;$(".cj-carousel-root li",this.parentEl).each(function(c){if(a==$(this).data("pageNum"))return b=$(this),!1});return b}});CJ.Carousel.Store=function(a){this.pages={};this.pageSize=3;CJ.apply(this,a)};
CJ.Carousel.Store.prototype={getPage:function(a){a=a||0;this.pages[a]?this.callSuccessCb(a):this.loadPage(a)},loadPage:function(){throw"CJ.Carousel.Store::loadPage must be implemented in sub-class";},callSuccessCb:function(a){this.callback.success.fn.call(this.callback.success.scope,this.pages[a])},setPageLoadCallback:function(a){this.callback={success:{fn:a.success.fn,scope:a.success.scope},failure:{fn:a.failure.fn||function(){},scope:a.failure.scope||window}}},getTotalSize:function(){return this.totalSize||
100},pageLoaded:function(a){this.pages[a.pageNum]=a.items;this.totalSize=a.total;this.pageSize=a.pageSize;this.callSuccessCb(a.pageNum)},getSize:function(){return this.size},getPageSize:function(){return this.pageSize}};CJ.Carousel.Renderer.AbstractRenderer=CJ.extend(CJ.Component,{constructor:function(a){a=a||{};CJ.apply(this,a)},createMarkup:function(){throw"AbstractRenderer::createMarkup must be implemented in sub-class";}});CJ.Carousel.Renderer.PageRenderer=CJ.extend(CJ.Carousel.Renderer.AbstractRenderer,{constructor:function(a){CJ.Carousel.Renderer.PageRenderer.superclass.constructor.call(this,a);CJ.apply(this,a.renderers.page||{});this.rowRenderer=this.createRowRenderer();this.children=[this.rowRenderer]},createRowRenderer:function(){return new CJ.Carousel.Renderer.RowRenderer({pageRenderer:this,renderers:this.renderers,carousel:this.carousel})},isAnyPageExists:function(){return 0!=$(".cj-carousel-page",this.parentEl).size()},
getPageIfExists:function(){var a=$(".cj-carousel-page",this.parentEl),b=!1;if(0<a.size()){var c=this.carousel.getCurrentPageNum();a.each(function(a){a=$(this);if(a.data("pageNum")==c)return b=a,!1})}return b},reConfigure:function(a){CJ.apply(this,a)},getPageData:function(){return this.pageData},getColsCount:function(){return this.cols||1},getContextEl:function(){var a=this.carousel.getCurrentPageNum(),b=$(".cj-carousel-page",this.parentEl),c,d=!1;b.each(function(b){b=$(this);if(b.data("pageNum")-
0>a)return d=b,c="Before",!1});b.reverse().each(function(b){b=$(this);var e=b.data("pageNum")-0;if(a>e)return d=b,c="After",!1});return{el:d,position:c}},createPage:function(){return $('<li class="cj-carousel-page '+this.settings.theme+'"></li>')},createMarkup:function(){this.rootList=$("li",this.parentEl);var a=this.getPageIfExists();if(a)return this.el=a,this.renderChildren(this.el),this.carousel.animator.runWithExistingItem(this.carousel.getLastPage(),a),this.carousel.setLastPage(a),this.el;if(this.isAnyPageExists()){var b=
this.getContextEl(),a=this.carousel.getLastPage();this.el=this.createPage();this.el["insert"+b.position](b.el).data("pageNum",this.carousel.getCurrentPageNum());this.renderChildren(this.el);this.carousel.getCurrentPageNum()<a.data("pageNum")&&(b=this.carousel.getList(),b.css({left:parseInt(b.css("left"))-this.el.width()}));this.carousel.animator.runWithExistingItem(a,this.el);this.carousel.setLastPage(this.el);return this.el}this.el=this.createPage();this.el.prependTo($(".cj-carousel-root",this.parentEl)).data("pageNum",
this.carousel.getCurrentPageNum());this.renderChildren(this.el);this.carousel.setLastPage(this.el);this.carousel.animator.runWithNewItem(this.carousel.getLastPage(),this.el);return this.el}});CJ.Carousel.Renderer.RowRenderer=CJ.extend(CJ.Carousel.Renderer.AbstractRenderer,{constructor:function(a){CJ.Carousel.Renderer.RowRenderer.superclass.constructor.call(this,a);CJ.apply(this,a.renderers.row||{});this.itemRenderer=this.createItemRenderer();this.children=[this.itemRenderer]},createItemRenderer:function(){return new CJ.Carousel.Renderer.ItemRenderer({rowRenderer:this,renderers:this.renderers,pageRenderer:this.pageRenderer,carousel:this.carousel})},setRowsPerPage:function(){this.totalRowsPerPage=
Math.ceil(this.pageRenderer.getPageData().length/this.pageRenderer.getColsCount())},createMarkup:function(){this.setRowsPerPage();var a="";this.pageRenderer.getColsCount();for(var b=0;b<this.totalRowsPerPage;b++)var c="cj-carousel-row"+this.getCurrentRowClassName(b)+" "+this.carousel.settings.theme,a=a+('<div class="cj-carousel-row '+c+" "+this.carousel.settings.theme+'"></div>'),a=a+('<div class="cj-carousel-row-clear-fix'+this.getCurrentRowClassName(b)+" "+this.carousel.settings.theme+'"></div>');
this.parentEl.children().remove();return this.el=$(a).appendTo(this.parentEl)},getCurrentRowClassName:function(a){var b="";0==a&&(b="-first");a==this.totalRowsPerPage-1&&(b="-last");return b}});CJ.Carousel.Renderer.ItemRenderer=CJ.extend(CJ.Carousel.Renderer.AbstractRenderer,{constructor:function(a){CJ.Carousel.Renderer.ItemRenderer.superclass.constructor.call(this,a);CJ.apply(this,a.renderers.item||{})},createMarkup:function(){var a=this.pageRenderer.getPageData(),b=this.pageRenderer.getColsCount(),c=this;$(".cj-carousel-row",this.parentEl.parent()).each(function(d){d="";for(var f=0;f<b;f++){var e=a[f];"undefined"!=typeof e&&(d+='<div class="cj-carousel-row-item '+c.carousel.settings.theme+
'">'+c.createItem(e)+"</div>")}a=a.slice(b,a.length);$(this).html(d)})},createItem:function(a){throw"ItemRenderer::createItem should be implemented in sub-class";}});CJ.Carousel.Navigation.AbstractNavigator=CJ.extend(function(){},{constructor:function(a){CJ.apply(this,a)}});CJ.Carousel.Navigation.AbstractButton=CJ.extend(function(){},{constructor:function(a){a=a||{text:""};CJ.apply(this,a)},afterRender:function(){$("."+this.cls).css({"float":"left"}).click($.proxy(this.onButtonClick,this))}});CJ.Carousel.Navigation.PrevButtonNavigator=CJ.extend(CJ.Carousel.Navigation.AbstractButton,{constructor:function(a){CJ.Carousel.Navigation.PrevButtonNavigator.superclass.constructor.call(this,a);this.cls="cj-carousel-navigation-prev-btn";this.inactiveCls="cj-carousel-inactive-prev-button"},createMarkup:function(){return'<div class="'+this.cls+" "+this.inactiveCls+'">'+this.text+"</div>"},onButtonClick:function(a){return-1!=$(a.target).attr("class").indexOf(this.inactiveCls)?!1:this.carousel.movePage(this.carousel.getCurrentPageNum()-
1)},setValidCls:function(){var a=$("."+this.cls,this.carousel.el);0==this.carousel.getCurrentPageNum()?a.addClass(this.inactiveCls):a.removeClass(this.inactiveCls)}});CJ.Carousel.Navigation.NextButtonNavigator=CJ.extend(CJ.Carousel.Navigation.AbstractButton,{constructor:function(a){CJ.Carousel.Navigation.NextButtonNavigator.superclass.constructor.call(this,a);this.cls="cj-carousel-navigation-next-btn";this.inactiveCls="cj-carousel-inactive-next-button"},createMarkup:function(){return'<div class="'+this.cls+'">'+this.text+"</div>"},onButtonClick:function(a){return-1!=$(a.target).attr("class").indexOf(this.inactiveCls)?!1:this.carousel.movePage(this.carousel.getCurrentPageNum()+
1)},setValidCls:function(){var a=$("."+this.cls,this.carousel.el),b=Math.ceil(this.carousel.getStore().getTotalSize()/this.carousel.getStore().getPageSize());this.carousel.getCurrentPageNum()==b-1?a.addClass(this.inactiveCls):a.removeClass(this.inactiveCls)}});CJ.Carousel.Navigation.ButtonNavigator=CJ.extend(CJ.Carousel.Navigation.AbstractNavigator,{constructor:function(a){a=a||{};CJ.Carousel.Navigation.ButtonNavigator.superclass.constructor.apply(this,arguments);this.prevButton=new (a.prevNavigatorCls||CJ.Carousel.Navigation.PrevButtonNavigator);this.nextButton=new (a.nextNavigatorCls||CJ.Carousel.Navigation.NextButtonNavigator)},render:function(){var a=this.carousel.getPlaceHolder();a.prepend(this.prevButton.createMarkup());a.append(this.nextButton.createMarkup());
this.prevButton.carousel=this.carousel;this.nextButton.carousel=this.carousel;this.afterRender()},afterRender:function(){this.prevButton.afterRender();this.nextButton.afterRender();$("."+this.prevButton.cls).next().css({"float":"left"});this.setValidCls()},setValidCls:function(){this.prevButton.setValidCls();this.nextButton.setValidCls()}});CJ.Carousel.Animation.BaseAnimator=CJ.extend(function(){},{constructor:function(a){CJ.apply(this,a)},beforeRun:function(a,b){this.newPage=b;this.lastPage=a;this.list=$("li",this.carousel.el);this.listParent=this.list.parent();this.lastPageIdx=this.getPageIdx(a);this.newPageIdx=this.getPageIdx(b);this.pageCssWidth=parseInt(b.width());this.itemsToScrollCount=this.getInnerItems().length-this.lastPageIdx;this.offset=this.pageCssWidth*this.itemsToScrollCount;return!0},getPageIdx:function(a){return this.list.index(a)},
getInnerItems:function(){return $("li:lt("+this.newPageIdx+")",this.carousel.el)},runWithNewItem:function(a,b){if(!this.beforeRun(a,b))return!1;if(this.newPageIdx>this.lastPageIdx)this.offset=-this.offset;else{this.offset=Math.abs(this.offset);var c=parseInt(this.listParent.css("left"));this.listParent.css({left:0==c?0:c-this.pageCssWidth})}return this.afterRun()},runWithExistingItem:function(a,b){if(!this.beforeRun(a,b))return!1;this.offset=this.newPageIdx>this.lastPageIdx?-this.offset:Math.abs(this.offset);
return this.afterRun()},afterRun:function(){this.lastPage.fadeOut($.proxy(function(){this.listParent.css({left:"+="+this.offset});this.newPage.fadeIn()},this))}});CJ.Carousel.Animation.FadeAnimator=CJ.extend(CJ.Carousel.Animation.BaseAnimator,{afterRun:function(){this.beforeAnimate&&this.beforeAnimate.fn.call(this.beforeAnimate.scope);this.listParent.fadeOut(1E3,$.proxy(function(){this.listParent.animate({left:"+="+this.offset},1,$.proxy(function(){this.listParent.fadeIn(1E3);this.afterAnimate&&this.afterAnimate.fn.call(this.afterAnimate.scope)},this))},this))}});CJ.Carousel.Animation.SlideAnimator=CJ.extend(CJ.Carousel.Animation.BaseAnimator,{afterRun:function(){this.beforeAnimate&&this.beforeAnimate.fn.call(this.beforeAnimate.scope);0==this.newPageIdx?this.listParent.animate({left:0},this.animationTime,$.proxy(function(){this.afterAnimate&&this.afterAnimate.fn.call(this.afterAnimate.scope)},this)):this.listParent.animate({left:"+="+this.offset},this.animationTime,$.proxy(function(){this.afterAnimate&&this.afterAnimate.fn.call(this.afterAnimate.scope)},this))}});
